<script src="assets/js/main.min.js"></script>

<script>
// Theme toggle functionality
function toggleTheme() {
    const body = document.body;
    const currentTheme = body.getAttribute('data-theme');
    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    
    body.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
}

// Language toggle functionality
function toggleLanguage() {
    const currentLang = localStorage.getItem('language') || 'en';
    const newLang = currentLang === 'en' ? 'zh' : 'en';
    
    // Hide all language elements
    document.querySelectorAll('[data-i18n]').forEach(el => {
        el.style.display = 'none';
    });
    
    // Show elements for the new language
    document.querySelectorAll(`[data-i18n="${newLang}"]`).forEach(el => {
        el.style.display = 'block';
    });
    
    localStorage.setItem('language', newLang);
}

// Initialize theme and language on page load
document.addEventListener('DOMContentLoaded', function() {
    // Initialize theme
    const savedTheme = localStorage.getItem('theme') || 'light';
    document.body.setAttribute('data-theme', savedTheme);
    
    // Initialize language
    const savedLang = localStorage.getItem('language') || 'en';
    document.querySelectorAll('[data-i18n]').forEach(el => {
        el.style.display = 'none';
    });
    document.querySelectorAll(`[data-i18n="${savedLang}"]`).forEach(el => {
        el.style.display = 'block';
    });
});
</script>

{% include analytics.html %}
{% include fetch_google_scholar_stats.html %}
